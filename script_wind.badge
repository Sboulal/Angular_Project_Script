#!/usr/bin/env node

const { spawn } = require('child_process');
const path = require('path');

console.log('ğŸš€ Starting Full Stack Project...');

// Start Python server
console.log('ğŸ Starting Python server...');
const pythonServer = spawn('py', ['run_server.py'], {
    cwd: 'PRINTPROD',
    stdio: 'inherit',
    shell: true
});

// Wait then start Angular
setTimeout(() => {
    console.log('âš¡ Installing npm packages and starting Angular server...');
    const angularServer = spawn('npm install && ng serve', [], {
        cwd: 'Read_excel_data_angular-main',
        stdio: 'inherit', 
        shell: true
    });

    // Handle Ctrl+C
    process.on('SIGINT', () => {
        console.log('\nğŸ›‘ Stopping servers...');
        pythonServer.kill();
        angularServer.kill();
        process.exit(0);
    });

}, 3000);

console.log('âœ… Both servers starting...');
console.log('ğŸŒ Python: http://localhost:5000');
console.log('ğŸŒ Angular: http://localhost:4200');